<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="Cache-Control" content="no-store" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Memory Profiler — Vista general</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
<!-- README corto:
     1) Levanta broker + gui_server (Prompt 3 con /metrics).
     2) Abre http://127.0.0.1:8080/
     3) Observa métricas refrescándose cada 1 s.
-->

<header class="header">
    <h1>Memory Profiler — Vista general</h1>
    <div id="status-pill" class="status-pill status-red" aria-live="polite">Sin conexión</div>
</header>

<main class="container">
    <section aria-labelledby="metrics-title">
        <h2 id="metrics-title">Métricas generales</h2>
        <div class="grid">
            <article class="card">
                <h3>Memoria actual</h3>
                <div class="value"><span id="currentMB">—</span> MB</div>
            </article>
            <article class="card">
                <h3>Asignaciones activas</h3>
                <div class="value"><span id="activeAllocs">—</span></div>
            </article>
            <article class="card">
                <h3>Memoria fugada</h3>
                <div class="value">
                    <span id="leaksMB">—</span> MB
                    <span id="leaksBadge" class="badge badge-muted" hidden>estimado</span>
                </div>
            </article>
            <article class="card">
                <h3>Uso máximo (peak)</h3>
                <div class="value"><span id="peakMB">—</span> MB</div>
            </article>
            <article class="card">
                <h3>Total asignaciones</h3>
                <div class="value"><span id="totalAllocs">—</span></div>
            </article>
        </div>

        <div class="substatus">
            <span>Última actualización: <strong id="lastUpdated">—:—:—</strong></span>
            <span class="sep">•</span>
            <span>Fuente: <strong id="sourceLabel">—</strong></span>
        </div>
    </section>

    <section aria-labelledby="timeline-title" class="muted">
        <h2 id="timeline-title">Línea de tiempo</h2>
        <div class="placeholder">Pendiente en el siguiente prompt</div>
    </section>

    <section aria-labelledby="topfiles-title" class="muted">
        <h2 id="topfiles-title">Top 3 archivos</h2>
        <div class="placeholder">Pendiente en el siguiente prompt</div>
    </section>
</main>

<footer class="footer">
    <button id="btnFreeze" class="btn" aria-pressed="false">Congelar</button>
    <button id="btnRefresh" class="btn btn-secondary">Forzar refresh</button>
</footer>

<script src="app.js" defer></script>
</body>
</html>
